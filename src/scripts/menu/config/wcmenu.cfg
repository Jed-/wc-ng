if (= (checkwc) 1) [

loop i (listlen $wc_plugins) [
    createine (concatword "plugin_" (f_get_plugin_name $i) "_autoload") 0
]

newgui "Player display settings" [
    guistayopen [
        guilist [
            guicheckbox "enabled" showplayerdisplay
            guibar
            guibutton "reset" "playerdisplayreset"
        ]
        guibar
        guicheckbox "show spectators" playerdisplayshowspectators
        guibar
        guitext "width offset (default: 0)"
        guislider playerdisplaywidthoffset
        guitext "height offset (default: 250)"
        guislider playerdisplayheightoffset
        guitext "right offset (default: 0)"
        guislider playerdisplayrightoffset
        guitext "line offset (default: 0)"
        guislider playerdisplaylineoffset
        guitab 2
        guitext "player limit (default: 32)"
        guislider playerdisplayplayerlimit
        guitext "max player name len (default: 13)"
        guislider playerdisplaymaxnamelen
        guitext "alpha (default: 150)"
        guislider playerdisplayalpha
    ]
]

playerdisplaysettings = [ showgui "Player display settings" ]

newgui "Scoreboard settings" [
    guistayopen [
        guicheckbox "Show Extinfo"            "showextinfo"
        guibar
        guicheckbox "Show Frags"              "showfrags"
        guicheckbox "Show Deaths"             "showdeaths"
        guicheckbox "Show KpD"                "showkpd"
        guicheckbox "Show Accuracy"           "showacc"
        guicheckbox "Show Teamkills"          "showtks"
        guibar
        guitext     "Show Country"
        guislider   "showcountry"
        guibar
        guicheckbox "Show Server Uptime"      "showserveruptime"
        guicheckbox "Show Server Mod"         "showservermod"
    ]
]

extinfosettings = [ showgui "Scoreboard settings" ]


statsdisplaysettings = [
    f_color_format_choice $statsdisplayfmt 6 [
        "Name"           "%n"
        "Team"           "%t"
        "Teamkills"      "%i"
        "Frags"          "%f"
        "KpD"            "%k"
        "Accuracy"       "%a"
        "Ping"           "%p"
        "State"          "%s"
        "Flags / Skulls" "%x"
        "Game mode"      "%g"
        "Game speed"     "%u"
        "Game Paused"    "%l"
        "Map name"       "%m"
        "Map info"       "%o"
        "Mastermode"     "%e"
        ] [ if (> $numargs 0) [ statsdisplayfmt $arg1 ]
    ]
]

newgui "Highlight-Level" [
        guibutton "Off" "highlight 0";
        guibutton "Red" "highlight 1";
        guibutton "Blinking" "highlight 2";
        guibutton "Colorloop" "highlight 3";
]

newgui "Lock Captureweapons" [
        guibutton (gunname 1) "say #lock captureweapons 1";
        guibutton (gunname 2) "say #lock captureweapons 2";
        guibutton (gunname 3) "say #lock captureweapons 3";
        guibutton (gunname 4) "say #lock captureweapons 4";
        guibutton (gunname 5) "say #lock captureweapons 5";
]

f_show_wcmenu = [
    guistayopen [
    guititle "General Configuration"

    guilist [
        guilist [
            guilist [
                guicheckbox "Show Stats Display"                "showstatsdisplay"
                guibar
                guibutton   "Settings"                          "statsdisplaysettings"
            ]
            guicheckbox "Show Time Left Display"                "showtimeleft"
            guicheckbox "Show Ping Display"                     "showpingdisplay"
            guicheckbox "Show Bandwidth Display"                "showbandwidthdisplay"
            guilist [
                guicheckbox "Show Player Display"               "showplayerdisplay"
                guibar
                guibutton   "Settings"                          "playerdisplaysettings"
            ]
            guilist [
                guicheckbox "Show Extinfo Scoreboard"           "showextinfo"
                guibar
                guibutton   "Settings"                          "extinfosettings"
            ]
            guilist [
                guicheckbox "Check for new versions on startup" "wcautoversioncheck"
                guibar
                guibutton   "Check now"                         "wccheckversion"
            ]
        ]
    ]

    guititle "Plugins";

    f_update_plugin_status

    guilist [
        printplugins
    ]

    guilist [
        guibutton "^f0List Plugins "    "listplugins"
    ]

    guitab "wc settings 2"

    guititle  "Extinfo"
    guicheckbox "Use Extinfo Server Browser" extinfoserverbrowser
    guibutton "Find Players" [showgui $extinfo_player_search_guiname]
    guibar

    guititle  "Demo"
    guibutton "Demo Recorder" "demorecordergui"
    guibutton "Search Demo"   "searchdemogui"
    //guibar

    ]// end guistayopen
]

printplugins = [
    len = (listlen $wc_plugins)

    guilist [
        loop i $len [
                guitext (concatword (f_get_plugin_desc $i) " ")
        ]
    ]

    guilist [
        loop i $len [
            guicheckbox "Enabled " (concatword "plugin_" (f_get_plugin_name $i) "_loaded") [] [] [ f_update_plugins ]
        ]
    ]

    guilist [
        loop i $len [
            guicheckbox "AutoLoad " (concatword "plugin_" (f_get_plugin_name $i) "_autoload")
        ]
    ]

    guilist [
        loop i $len [
            if (getalias (concatword (f_get_plugin_name $i) "gui")) [
                guibutton "Gui " (concatword (f_get_plugin_name $i) "gui")
            ] [
                guitext "" 0
            ]
        ]
    ]

    guilist [
        loop i $len [
            if (getalias (concatword (f_get_plugin_name $i) "settings")) [
                guibutton "Settings " (concatword (f_get_plugin_name $i) "settings")
            ] [
                guitext "" 0
            ]
        ]
    ]
]
] // end check wc
